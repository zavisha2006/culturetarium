<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Culturetarium</title>
    <link rel="stylesheet" href="styles.css"></link>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://zxgctpdtgmbjadvzamfe.supabase.co'
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inp4Z2N0cGR0Z21iamFkdnphbWZlIiwicm9sZSI6ImFub24iLCJpYXQiOjE2OTA3MzI5NjEsImV4cCI6MjAwNjMwODk2MX0.Q4qNk4-hqo45PeqnKkz3I-JWnIv7IpUaFAojgUYwSoA'

        const _supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY)

        async function loadData() {
            
            let { data, error } = await _supabase
            .rpc('get_random_culture')
            console.log(data);
            if(!error) {
                    const cultureName = document.getElementById("culture-name");
                    cultureName.textContent = data[0]["name"];

                    const cultureDesc = document.getElementById("culture-description");
                    cultureDesc.textContent = data[0]["description"];

                    const cultureUrl = document.getElementById("culture-url")
                    cultureUrl.href = data[0]["url"];

                    const imageUrl = document.getElementById("img-url");
                    imageUrl.src = data[0]["img_url"];

                    const imageSource = document.getElementById("img-source");
                    imageSource.textContent = data[0]["source"];
                }
            }

        loadData()
    </script>
</head>
<body>
    <div class="box header">
        <a href=index.html style="color: inherit; text-decoration: inherit;"><p id="title">Culturetarium</p></a>
        <hr id="break">
        <ul>
            <li><a href="about.html">About</a></li>
            <li><a href="contact.html">Contact</a></li>
        </ul>
    </div>

    <div class="box main-randomize">
        <h1 id="culture-name"></h1>
        <p id="culture-description"></p>
        <a id="culture-url" target="_blank">Read more</a>
        <br>
        <img id="img-url">
        <p id="img-source"></p> 
    </div>

    <div class="box r-container">
        <h1>Learn about another culture?</h1>
        <div id="randomize-button" onclick="location.href='randomize.html';">â†» Randomize!</div>
    </div>
</body>
</html>